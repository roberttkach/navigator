[importlinter]
root_package = navigator

[contract:layers]
name = Clean layering
type = layers
layers =
    navigator.core
    navigator.app
    navigator.adapters
    navigator.infra
    navigator.presentation
    navigator.entrypoints
allowed_dependencies =
    navigator.core ->
    navigator.app -> navigator.core
    navigator.adapters -> navigator.core
    navigator.infra -> navigator.adapters,navigator.app,navigator.core,navigator.presentation
    navigator.presentation -> navigator.core
    navigator.entrypoints -> navigator.api,navigator.infra,navigator.core

[contract:forbid_presentation_to_adapters]
name = Presentation must not import adapters
type = forbidden
source_modules =
    navigator.presentation
forbidden_modules =
    navigator.adapters

[contract:forbid_core_outbound]
name = Core must be independent
type = forbidden
source_modules =
    navigator.core
forbidden_modules =
    navigator.adapters,navigator.app,navigator.infra,navigator.presentation,navigator.entrypoints

[contract:forbid_app_to_adapters]
name = Application must not import adapters
type = forbidden
source_modules =
    navigator.app
forbidden_modules =
    navigator.adapters

[contract:forbid_infra_to_presentation]
name = Infrastructure must not import presentation
type = forbidden
source_modules =
    navigator.infra
forbidden_modules =
    navigator.presentation

[contract:forbid_app_to_aiogram]
name = Application must not import aiogram
type = forbidden
source_modules =
    navigator.app
forbidden_modules =
    aiogram

[contract:forbid_presentation_to_infra]
name = Presentation must not import infrastructure
type = forbidden
source_modules =
    navigator.presentation
forbidden_modules =
    navigator.infra

[contract:forbid_core_to_aiogram]
name = Core must not import aiogram
type = forbidden
source_modules =
    navigator.core
forbidden_modules =
    aiogram

[contract:forbid_adapters_outbound]
name = Adapters depend only on core (no outward to app/infra/presentation/entrypoints)
type = forbidden
source_modules =
    navigator.adapters
forbidden_modules =
    navigator.app,navigator.infra,navigator.presentation,navigator.entrypoints

[contract:forbid_entrypoints_to_presentation]
name = Entrypoints must not depend on presentation
type = forbidden
source_modules =
    navigator.entrypoints
forbidden_modules =
    navigator.presentation
